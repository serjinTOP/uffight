@{
ViewBag.Title = "UFFight Robótica";
Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <section class="content-header">
    <h1>
      Cadastro
      <small>Tarefas</small>
    </h1>
  </section>
  <section>
    <form action="/Tarefas/Save" method="post">
      <div class="box-body">
        <div class="form-group">
          <label>Tarefa</label>
          <input type="text" class="form-control" name="tarefa" placeholder="Tarefa">
        </div>
        <div class="form-group">
          <label>Robô</label>
          <select class="form-control" name="robo" placeholder="Robô">
            <option disabled selected value></option>
            <option>Montenegro</option>
            <option>Nakazato</option>
            <option>Pachequinho</option>
            <option>Paladino</option>
            <option>Qüekinem</option>
            <option>SaiaJeans</option>
          </select>
        </div>
        <div class="form-group">
          <label>Urgência</label>
          <select class="form-control" name="urgencia" placeholder="Urgência">
            <option disabled selected value></option>
            <option>Alta</option>
            <option>Média</option>
            <option>Baixa</option>
          </select>
        </div>  
        <div class="form-group">
          <label>Status</label>
          <select class="form-control" name="status" placeholder="Status">
            <option disabled selected value></option>
            <option>Nova</option>
            <option>Em Andamento</option>
            <option>Resolvida</option>
          </select>
        </div>
        <div class="box-footer">
          <button type="submit" class="btn btn-primary">Salvar</button>
        </div>
        <br>
        <br>
      </form>
    </section>
<div class="row">
            <div class="col-xs-12">
                <div class="box">
                  <div class="box-header">
                        <h3 class="box-title">Tarefas Abertas</h3>
                        <div class="box-tools">
                            <div class="input-group input-group-sm" style="width: 150px;">
                                <div class="input-group-btn">
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /.box-header -->
                    <div class="box-body table-responsive no-padding">
                        <table class="table table-hover" id="task_table">
                            <tr>
                                <th>Tarefa</th>
                                <th>Robô</th>
                                <th>Urgência</th>
                                <th>Status</th>
                            </tr>
                        </table>
                    </div>
                    <!-- /.box-body -->
                </div>
                <!-- /.box -->
            </div>
        </div>
    <!-- /.content -->

  </div>
  <!-- /.content-wrapper -->

  @section Scripts 
  {
    @Scripts.Render("~/bundles/dashboard1")
  }

  <script>
    window.onload = function getAjaxes(){
      $.ajax({
        url: '@Url.Action("TaskList", "Tarefas")',
        type: 'GET',
        cache: false,
        data: JSON.stringify(),
        success: function(data){
          var task_data = '';
          $.each(data, function(key, value){
            task_data += '<tr>';
            task_data += '<td>' + value.Tarefa+'</td>';
            task_data += '<td>' + value.Robo+'</td>';
            task_data += '<td>' + value.Urgencia+'</td>';
            task_data += '<td>' + value.Status+'</td>';
            task_data += '</tr>';
          });
          $('#task_table').append(task_data);
        }
      });
      //console.log(teste);
    }
  </script>